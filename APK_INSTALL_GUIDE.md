# ğŸ“± å¿«é€Ÿå®‰è£…åˆ°æ‰‹æœºæŒ‡å—

## ğŸš€ ä¸‰ç§æ–¹å¼å®‰è£… APK åˆ°æ‰‹æœº

### æ–¹å¼ 1ï¸âƒ£: ä¸€é”®æ„å»ºå¹¶å®‰è£… (æœ€å¿«)

**å‰æ:** æ‰‹æœºå·²é€šè¿‡ USB è¿æ¥å¹¶å¼€å¯ USB è°ƒè¯•

```powershell
.\build-and-install.ps1
```

è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨:
1. æ„å»º Web åº”ç”¨
2. åŒæ­¥åˆ° Android é¡¹ç›®
3. æ„å»º APK
4. é€šè¿‡ ADB å®‰è£…åˆ°æ‰‹æœº
5. å¯é€‰æ‹©ç«‹å³å¯åŠ¨åº”ç”¨

---

### æ–¹å¼ 2ï¸âƒ£: åˆ†æ­¥æ‰§è¡Œ

#### æ­¥éª¤ 1: æ„å»º APK

```powershell
.\build-apk.ps1
```

æ„å»ºå®Œæˆå,APK æ–‡ä»¶ä½äº:
```
android\app\build\outputs\apk\debug\app-debug.apk
```

#### æ­¥éª¤ 2: å®‰è£…åˆ°æ‰‹æœº

**é€‰é¡¹ A - ä½¿ç”¨ ADB (æ¨è):**
```powershell
.\install-apk.ps1
```

**é€‰é¡¹ B - æ‰‹åŠ¨ä¼ è¾“:**
1. å°† APK æ–‡ä»¶å¤åˆ¶åˆ°æ‰‹æœº
2. åœ¨æ‰‹æœºä¸Šæ‰¾åˆ° APK æ–‡ä»¶
3. ç‚¹å‡»å®‰è£…

---

### æ–¹å¼ 3ï¸âƒ£: é€šè¿‡æ–‡ä»¶ä¼ è¾“ (æ— éœ€ USB è°ƒè¯•)

1. **æ„å»º APK:**
   ```powershell
   .\build-apk.ps1
   ```

2. **ä¼ è¾“æ–‡ä»¶åˆ°æ‰‹æœº:**
   - é€šè¿‡ USB æ•°æ®çº¿å¤åˆ¶
   - é€šè¿‡å¾®ä¿¡/QQ ç­‰å‘é€ç»™è‡ªå·±
   - ä¸Šä¼ åˆ°äº‘ç›˜åæ‰‹æœºä¸‹è½½
   - é€šè¿‡å±€åŸŸç½‘ä¼ è¾“å·¥å…·

3. **åœ¨æ‰‹æœºä¸Šå®‰è£…:**
   - æ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨
   - æ‰¾åˆ° APK æ–‡ä»¶
   - ç‚¹å‡»å®‰è£…
   - å…è®¸å®‰è£…æœªçŸ¥æ¥æºåº”ç”¨

---

## ğŸ“‹ è¯¦ç»†è¯´æ˜

### æ„å»º Debug APK

Debug ç‰ˆæœ¬ç”¨äºå¼€å‘æµ‹è¯•,å·²ç­¾åä½†ä½¿ç”¨çš„æ˜¯è°ƒè¯•å¯†é’¥ã€‚

```powershell
# åªæ„å»º APK,ä¸å®‰è£…
.\build-apk.ps1
```

**é¦–æ¬¡æ„å»ºä¼š:**
- ä¸‹è½½ Gradle æ„å»ºå·¥å…· (çº¦ 100MB)
- ä¸‹è½½ Android SDK ä¾èµ– (çº¦ 200MB)
- ç¼–è¯‘ Android é¡¹ç›®

**æ„å»ºæ—¶é—´:**
- é¦–æ¬¡: 5-10 åˆ†é’Ÿ (å–å†³äºç½‘ç»œé€Ÿåº¦)
- åç»­: 1-3 åˆ†é’Ÿ

### ä½¿ç”¨ ADB å®‰è£…

**å‰ææ¡ä»¶:**
1. âœ… å®‰è£… Android SDK Platform Tools (åŒ…å« ADB)
2. âœ… æ‰‹æœºå¼€å¯ USB è°ƒè¯•
3. âœ… æ‰‹æœºé€šè¿‡ USB è¿æ¥ç”µè„‘
4. âœ… åœ¨æ‰‹æœºä¸Šæˆæƒ USB è°ƒè¯•

**å¦‚ä½•å¼€å¯ USB è°ƒè¯•:**

1. æ‰“å¼€æ‰‹æœº **è®¾ç½®**
2. è¿›å…¥ **å…³äºæ‰‹æœº**
3. è¿ç»­ç‚¹å‡» **ç‰ˆæœ¬å·** 7 æ¬¡,å¯ç”¨å¼€å‘è€…é€‰é¡¹
4. è¿”å› **è®¾ç½®** > **ç³»ç»Ÿ** > **å¼€å‘è€…é€‰é¡¹**
5. å¼€å¯ **USB è°ƒè¯•**
6. è¿æ¥ç”µè„‘å,åœ¨æ‰‹æœºä¸Šç‚¹å‡» **å…è®¸ USB è°ƒè¯•**

**å®‰è£…å‘½ä»¤:**
```powershell
.\install-apk.ps1
```

### æ‰‹åŠ¨å®‰è£… (æ— éœ€ USB è°ƒè¯•)

**æ–¹æ³• 1: USB æ–‡ä»¶ä¼ è¾“**
1. é€šè¿‡ USB è¿æ¥æ‰‹æœº
2. é€‰æ‹© **æ–‡ä»¶ä¼ è¾“** æ¨¡å¼
3. å¤åˆ¶ APK åˆ°æ‰‹æœºå­˜å‚¨
4. åœ¨æ‰‹æœºä¸Šæ‰“å¼€æ–‡ä»¶ç®¡ç†å™¨
5. æ‰¾åˆ°å¹¶ç‚¹å‡» APK æ–‡ä»¶
6. å…è®¸å®‰è£…æœªçŸ¥æ¥æºåº”ç”¨
7. ç‚¹å‡»å®‰è£…

**æ–¹æ³• 2: é€šè¿‡å¾®ä¿¡/QQ**
1. é€šè¿‡å¾®ä¿¡æ–‡ä»¶ä¼ è¾“åŠ©æ‰‹æˆ– QQ å‘é€ç»™è‡ªå·±
2. åœ¨æ‰‹æœºä¸Šä¸‹è½½ APK
3. ç‚¹å‡»å®‰è£…

**æ–¹æ³• 3: å±€åŸŸç½‘ä¼ è¾“**
- ä½¿ç”¨å·¥å…·å¦‚: Send Anywhere, Snapdrop, LocalSend
- åœ¨åŒä¸€ WiFi ä¸‹æ— çº¿ä¼ è¾“

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: Gradle æ„å»ºå¤±è´¥

**é”™è¯¯ä¿¡æ¯:** `FAILURE: Build failed with an exception`

**å¯èƒ½åŸå› :**
- æœªå®‰è£… JDK 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- ç½‘ç»œé—®é¢˜å¯¼è‡´ä¾èµ–ä¸‹è½½å¤±è´¥
- Android SDK è·¯å¾„æœªé…ç½®

**è§£å†³æ–¹æ¡ˆ:**

1. **æ£€æŸ¥ Java ç‰ˆæœ¬:**
   ```powershell
   java -version
   ```
   åº”æ˜¾ç¤º 17 æˆ–æ›´é«˜ç‰ˆæœ¬

2. **å®‰è£… JDK 17:**
   - ä¸‹è½½: https://adoptium.net/
   - æˆ–ä½¿ç”¨: `winget install EclipseAdoptium.Temurin.17.JDK`

3. **é…ç½® Gradle ä½¿ç”¨å›½å†…é•œåƒ** (å¦‚æœç½‘ç»œæ…¢):
   ç¼–è¾‘ `android/build.gradle`,æ·»åŠ é˜¿é‡Œäº‘é•œåƒ

### é—®é¢˜ 2: ADB æœªæ‰¾åˆ°

**é”™è¯¯ä¿¡æ¯:** `âœ— æœªæ‰¾åˆ° ADB å·¥å…·!`

**è§£å†³æ–¹æ¡ˆ:**

**é€‰é¡¹ A - å®‰è£… Android SDK Platform Tools:**
1. ä¸‹è½½: https://developer.android.com/tools/releases/platform-tools
2. è§£å‹åˆ°ä¸€ä¸ªç›®å½•,å¦‚ `C:\platform-tools`
3. æ·»åŠ åˆ°ç³»ç»Ÿ PATH ç¯å¢ƒå˜é‡

**é€‰é¡¹ B - é€šè¿‡ Android Studio:**
1. å®‰è£… Android Studio
2. ADB ä½äº: `%LOCALAPPDATA%\Android\Sdk\platform-tools`
3. æ·»åŠ åˆ° PATH

**é€‰é¡¹ C - ä½¿ç”¨æ–‡ä»¶ä¼ è¾“æ–¹å¼:**
ä¸ä½¿ç”¨ ADB,ç›´æ¥ä¼ è¾“ APK æ–‡ä»¶åˆ°æ‰‹æœºå®‰è£…

### é—®é¢˜ 3: æ‰‹æœºæœªæ£€æµ‹åˆ°

**é”™è¯¯ä¿¡æ¯:** `âœ— æœªæ£€æµ‹åˆ°è¿æ¥çš„è®¾å¤‡!`

**æ£€æŸ¥æ¸…å•:**
- [ ] USB æ•°æ®çº¿å·²è¿æ¥
- [ ] æ‰‹æœºå·²å¼€å¯ USB è°ƒè¯•
- [ ] åœ¨æ‰‹æœºä¸Šå…è®¸äº† USB è°ƒè¯•æˆæƒ
- [ ] é€‰æ‹©çš„æ˜¯ **æ–‡ä»¶ä¼ è¾“** æˆ– **PTP** æ¨¡å¼,ä¸æ˜¯ä»…å……ç”µ

**æµ‹è¯•è¿æ¥:**
```powershell
adb devices
```

åº”è¯¥æ˜¾ç¤ºç±»ä¼¼:
```
List of devices attached
XXXXXX  device
```

### é—®é¢˜ 4: å®‰è£…å¤±è´¥ - INSTALL_FAILED_UPDATE_INCOMPATIBLE

**åŸå› :** å·²å­˜åœ¨ä¸åŒç­¾åçš„åŒåŒ…ååº”ç”¨

**è§£å†³æ–¹æ¡ˆ:**
```powershell
# å¸è½½æ—§ç‰ˆæœ¬
adb uninstall com.couple.sweettools

# é‡æ–°å®‰è£…
.\install-apk.ps1
```

æˆ–åœ¨æ‰‹æœºä¸Šæ‰‹åŠ¨å¸è½½åé‡æ–°å®‰è£…ã€‚

### é—®é¢˜ 5: æ‰‹æœºæç¤º"ç¦æ­¢å®‰è£…æœªçŸ¥åº”ç”¨"

**è§£å†³æ–¹æ¡ˆ:**
1. æ‰“å¼€ **è®¾ç½®** > **åº”ç”¨ç®¡ç†**
2. æ‰¾åˆ° **æ–‡ä»¶ç®¡ç†å™¨** æˆ– **Chrome** (å–å†³äºä»å“ªæ‰“å¼€çš„ APK)
3. æ‰¾åˆ° **å®‰è£…æœªçŸ¥åº”ç”¨** æƒé™
4. å…è®¸è¯¥åº”ç”¨å®‰è£…æœªçŸ¥åº”ç”¨

---

## ğŸ“ æ„å»ºä¸åŒç‰ˆæœ¬

### Debug ç‰ˆæœ¬ (å¼€å‘æµ‹è¯•)

```powershell
.\build-apk.ps1
```

- âœ… æ— éœ€é…ç½®ç­¾å
- âœ… å¯ä»¥ USB è°ƒè¯•
- âœ… åŒ…å«è°ƒè¯•ä¿¡æ¯
- âŒ æ–‡ä»¶è¾ƒå¤§
- âŒ ä¸èƒ½å‘å¸ƒåˆ°åº”ç”¨å•†åº—

### Release ç‰ˆæœ¬ (æ­£å¼å‘å¸ƒ)

éœ€è¦å…ˆç”Ÿæˆç­¾åå¯†é’¥,è¯¦è§ [ANDROID_BUILD.md](./ANDROID_BUILD.md)

---

## ğŸ¯ æ¨èå·¥ä½œæµç¨‹

### æ—¥å¸¸å¼€å‘æµ‹è¯•

```powershell
# ä¿®æ”¹ä»£ç å
.\build-and-install.ps1
```

### å‘ç»™æœ‹å‹æµ‹è¯•

```powershell
# 1. æ„å»º APK
.\build-apk.ps1

# 2. APK ä½äº: android\app\build\outputs\apk\debug\app-debug.apk
# 3. é€šè¿‡å¾®ä¿¡ç­‰å‘é€ç»™æœ‹å‹
```

### å‡†å¤‡å‘å¸ƒ

æŸ¥çœ‹ [ANDROID_BUILD.md](./ANDROID_BUILD.md) ä¸­çš„ Release æ„å»ºè¯´æ˜

---

## ğŸ’¡ å°æŠ€å·§

### å¿«é€Ÿé‡å»º

å¦‚æœåªä¿®æ”¹äº† Web ä»£ç :
```powershell
pnpm build
npx cap sync android
cd android
.\gradlew.bat assembleDebug
```

### æŸ¥çœ‹åº”ç”¨æ—¥å¿—

```powershell
# å®æ—¶æŸ¥çœ‹åº”ç”¨æ—¥å¿—
adb logcat | Select-String "Capacitor"
```

### å¸è½½åº”ç”¨

```powershell
adb uninstall com.couple.sweettools
```

### æˆªå›¾

```powershell
adb shell screencap -p /sdcard/screen.png
adb pull /sdcard/screen.png
```

---

## ğŸ“± æµ‹è¯•æ¸…å•

åœ¨å‘å¸ƒå‰,å»ºè®®æµ‹è¯•:

- [ ] åº”ç”¨èƒ½æ­£å¸¸å¯åŠ¨
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æƒé™è¯·æ±‚æ­£å¸¸
- [ ] ç½‘ç»œè¯·æ±‚æ­£å¸¸
- [ ] æœ¬åœ°å­˜å‚¨æ­£å¸¸
- [ ] æ¨ªå±/ç«–å±åˆ‡æ¢æ­£å¸¸
- [ ] è¿”å›é”®è¡Œä¸ºæ­£å¸¸
- [ ] åœ¨ä¸åŒ Android ç‰ˆæœ¬æµ‹è¯•

---

## ğŸ”— ç›¸å…³èµ„æº

- **Android SDK Platform Tools:** https://developer.android.com/tools/releases/platform-tools
- **ADB ä½¿ç”¨æŒ‡å—:** https://developer.android.com/tools/adb
- **ç­¾ååº”ç”¨:** https://developer.android.com/studio/publish/app-signing

---

**æœ‰é—®é¢˜?** æŸ¥çœ‹ [ANDROID_BUILD.md](./ANDROID_BUILD.md) è·å–æ›´å¤šä¿¡æ¯
